{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/lib/supabase/client.ts"],"sourcesContent":["// =====================================================\r\n// SUPABASE CLIENT - Browser (Client Components)\r\n// =====================================================\r\n\r\nimport { createBrowserClient } from '@supabase/ssr';\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAQI;AARJ,wDAAwD;AACxD,gDAAgD;AAChD,wDAAwD;AAExD;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,sNAAmB;AAI5B"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/services/auth.ts"],"sourcesContent":["// =====================================================\r\n// AUTH SERVICE - API Layer\r\n// =====================================================\r\n\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport type { User, Profile, LoginFormData, RegisterFormData } from '@/types';\r\n\r\nconst supabase = createClient();\r\n\r\n// Sign in with email\r\nexport async function signIn(\r\n  data: LoginFormData\r\n): Promise<{ user: User | null; error: string | null }> {\r\n  const { data: authData, error } = await supabase.auth.signInWithPassword({\r\n    email: data.email,\r\n    password: data.password,\r\n  });\r\n\r\n  if (error) {\r\n    console.error('Sign in error:', error);\r\n    return { user: null, error: 'Email yoki parol noto\\'g\\'ri' };\r\n  }\r\n\r\n  return {\r\n    user: authData.user\r\n      ? {\r\n          id: authData.user.id,\r\n          email: authData.user.email,\r\n          phone: authData.user.phone,\r\n          created_at: authData.user.created_at,\r\n        }\r\n      : null,\r\n    error: null,\r\n  };\r\n}\r\n\r\n// Sign up with email\r\nexport async function signUp(\r\n  data: RegisterFormData\r\n): Promise<{ user: User | null; error: string | null }> {\r\n  const { data: authData, error } = await supabase.auth.signUp({\r\n    email: data.email,\r\n    password: data.password,\r\n    options: {\r\n      data: {\r\n        full_name: data.full_name,\r\n        phone: data.phone,\r\n      },\r\n    },\r\n  });\r\n\r\n  if (error) {\r\n    console.error('Sign up error:', error);\r\n    if (error.message.includes('already registered')) {\r\n      return { user: null, error: 'Bu email allaqachon ro\\'yxatdan o\\'tgan' };\r\n    }\r\n    return { user: null, error: 'Ro\\'yxatdan o\\'tishda xatolik' };\r\n  }\r\n\r\n  // Create profile\r\n  if (authData.user) {\r\n    await supabase.from('profiles').insert({\r\n      id: authData.user.id,\r\n      full_name: data.full_name,\r\n      phone: data.phone,\r\n    });\r\n  }\r\n\r\n  return {\r\n    user: authData.user\r\n      ? {\r\n          id: authData.user.id,\r\n          email: authData.user.email,\r\n          phone: authData.user.phone,\r\n          created_at: authData.user.created_at,\r\n        }\r\n      : null,\r\n    error: null,\r\n  };\r\n}\r\n\r\n// Sign out\r\nexport async function signOut(): Promise<{ error: string | null }> {\r\n  const { error } = await supabase.auth.signOut();\r\n\r\n  if (error) {\r\n    console.error('Sign out error:', error);\r\n    return { error: 'Chiqishda xatolik' };\r\n  }\r\n\r\n  return { error: null };\r\n}\r\n\r\n// Get current user\r\nexport async function getCurrentUser(): Promise<User | null> {\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (!user) return null;\r\n\r\n  return {\r\n    id: user.id,\r\n    email: user.email,\r\n    phone: user.phone,\r\n    created_at: user.created_at,\r\n  };\r\n}\r\n\r\n// Get user profile\r\nexport async function getProfile(userId: string): Promise<Profile | null> {\r\n  const { data, error } = await supabase\r\n    .from('profiles')\r\n    .select('*')\r\n    .eq('id', userId)\r\n    .single();\r\n\r\n  if (error) {\r\n    console.error('Error fetching profile:', error);\r\n    return null;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n// Update user profile\r\nexport async function updateProfile(\r\n  userId: string,\r\n  updates: Partial<Profile>\r\n): Promise<{ profile: Profile | null; error: string | null }> {\r\n  const { data, error } = await supabase\r\n    .from('profiles')\r\n    .update(updates)\r\n    .eq('id', userId)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) {\r\n    console.error('Error updating profile:', error);\r\n    return { profile: null, error: 'Profilni yangilashda xatolik' };\r\n  }\r\n\r\n  return { profile: data, error: null };\r\n}\r\n\r\n// Reset password\r\nexport async function resetPassword(\r\n  email: string\r\n): Promise<{ error: string | null }> {\r\n  const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n    redirectTo: `${process.env.NEXT_PUBLIC_SITE_URL}/auth/reset-password`,\r\n  });\r\n\r\n  if (error) {\r\n    console.error('Reset password error:', error);\r\n    return { error: 'Xatolik yuz berdi' };\r\n  }\r\n\r\n  return { error: null };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/app/auth/register/RegisterForm.tsx"],"sourcesContent":["// =====================================================\r\n// REGISTER FORM - Client Component\r\n// =====================================================\r\n\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Eye, EyeOff } from 'lucide-react';\r\nimport { Button, Input } from '@/components/ui';\r\nimport { useAuthStore } from '@/store';\r\nimport { signUp, getProfile } from '@/services/auth';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport function RegisterForm() {\r\n  const router = useRouter();\r\n  const { setUser, setProfile } = useAuthStore();\r\n\r\n  const [formData, setFormData] = useState({\r\n    full_name: '',\r\n    email: '',\r\n    phone: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState<Partial<typeof formData>>({});\r\n\r\n  const validate = (): boolean => {\r\n    const newErrors: Partial<typeof formData> = {};\r\n\r\n    if (!formData.full_name.trim()) {\r\n      newErrors.full_name = 'Ismingizni kiriting';\r\n    }\r\n\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email kiriting';\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = 'Email noto\\'g\\'ri';\r\n    }\r\n\r\n    if (!formData.password) {\r\n      newErrors.password = 'Parol kiriting';\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = 'Parol kamida 6 ta belgidan iborat bo\\'lishi kerak';\r\n    }\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      newErrors.confirmPassword = 'Parollar mos kelmayapti';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validate()) return;\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { user, error } = await signUp({\r\n        email: formData.email,\r\n        password: formData.password,\r\n        full_name: formData.full_name,\r\n        phone: formData.phone,\r\n      });\r\n\r\n      if (error) {\r\n        toast.error(error);\r\n        return;\r\n      }\r\n\r\n      if (user) {\r\n        setUser(user);\r\n        \r\n        // Get profile\r\n        const profile = await getProfile(user.id);\r\n        if (profile) {\r\n          setProfile(profile);\r\n        }\r\n\r\n        toast.success('Muvaffaqiyatli ro\\'yxatdan o\\'tdingiz!');\r\n        router.push('/');\r\n      }\r\n    } catch (err) {\r\n      toast.error('Xatolik yuz berdi');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <Input\r\n        label=\"Ism Familiya\"\r\n        placeholder=\"Ism Familiya\"\r\n        value={formData.full_name}\r\n        onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n        error={errors.full_name}\r\n      />\r\n\r\n      <Input\r\n        label=\"Email\"\r\n        type=\"email\"\r\n        placeholder=\"email@example.com\"\r\n        value={formData.email}\r\n        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n        error={errors.email}\r\n      />\r\n\r\n      <Input\r\n        label=\"Telefon (ixtiyoriy)\"\r\n        type=\"tel\"\r\n        placeholder=\"+998 90 123 45 67\"\r\n        value={formData.phone}\r\n        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n      />\r\n\r\n      <div className=\"relative\">\r\n        <Input\r\n          label=\"Parol\"\r\n          type={showPassword ? 'text' : 'password'}\r\n          placeholder=\"••••••••\"\r\n          value={formData.password}\r\n          onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n          error={errors.password}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setShowPassword(!showPassword)}\r\n          className=\"absolute right-3 top-9 text-gray-400 hover:text-gray-600\"\r\n        >\r\n          {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n        </button>\r\n      </div>\r\n\r\n      <Input\r\n        label=\"Parolni tasdiqlash\"\r\n        type=\"password\"\r\n        placeholder=\"••••••••\"\r\n        value={formData.confirmPassword}\r\n        onChange={(e) =>\r\n          setFormData({ ...formData, confirmPassword: e.target.value })\r\n        }\r\n        error={errors.confirmPassword}\r\n      />\r\n\r\n      <Button type=\"submit\" fullWidth loading={loading}>\r\n        Ro'yxatdan o'tish\r\n      </Button>\r\n\r\n      <p className=\"text-xs text-gray-500 text-center\">\r\n        Ro'yxatdan o'tish orqali siz{' '}\r\n        <a href=\"/terms\" className=\"text-primary-600 hover:underline\">\r\n          foydalanish shartlari\r\n        </a>\r\n        ga rozilik bildirasiz.\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}