{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/lib/supabase/server.ts"],"sourcesContent":["// =====================================================\r\n// SUPABASE CLIENT - Server (Server Components, Actions, Route Handlers)\r\n// =====================================================\r\n\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies();\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll();\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            );\r\n          } catch {\r\n            // The `setAll` method was called from a Server Component.\r\n            // This can be ignored if you have middleware refreshing\r\n            // user sessions.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\n// Admin client with service role (for server-side only operations)\r\nexport async function createAdminClient() {\r\n  const cookieStore = await cookies();\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll();\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            );\r\n          } catch {}\r\n        },\r\n      },\r\n    }\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA,wDAAwD;AACxD,wEAAwE;AACxE,wDAAwD;AAExD;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4JAAO;IAEjC,OAAO,IAAA,iNAAkB,oKAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAGO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4JAAO;IAEjC,OAAO,IAAA,iNAAkB,gFAEvB,QAAQ,GAAG,CAAC,yBAAyB,EACrC;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM,CAAC;YACX;QACF;IACF;AAEJ"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/lib/utils.ts"],"sourcesContent":["// =====================================================\r\n// UTILITY FUNCTIONS\r\n// =====================================================\r\n\r\nimport { type ClassValue, clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\n// Tailwind class merge utility\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n// Format price in Uzbek som\r\nexport function formatPrice(price: number): string {\r\n  return new Intl.NumberFormat('uz-UZ', {\r\n    style: 'decimal',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(price) + ' so\\'m';\r\n}\r\n\r\n// Calculate discount percentage\r\nexport function calculateDiscount(price: number, originalPrice?: number): number {\r\n  if (!originalPrice || originalPrice <= price) return 0;\r\n  return Math.round((1 - price / originalPrice) * 100);\r\n}\r\n\r\n// Generate slug from text\r\nexport function slugify(text: string): string {\r\n  return text\r\n    .toString()\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/\\s+/g, '-')\r\n    .replace(/[^\\w\\-]+/g, '')\r\n    .replace(/\\-\\-+/g, '-');\r\n}\r\n\r\n// Truncate text\r\nexport function truncate(text: string, length: number): string {\r\n  if (text.length <= length) return text;\r\n  return text.slice(0, length) + '...';\r\n}\r\n\r\n// Format date\r\nexport function formatDate(date: string | Date): string {\r\n  return new Intl.DateTimeFormat('uz-UZ', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  }).format(new Date(date));\r\n}\r\n\r\n// Format relative time\r\nexport function formatRelativeTime(date: string | Date): string {\r\n  const now = new Date();\r\n  const past = new Date(date);\r\n  const diffMs = now.getTime() - past.getTime();\r\n  const diffMins = Math.floor(diffMs / 60000);\r\n  const diffHours = Math.floor(diffMs / 3600000);\r\n  const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n  if (diffMins < 1) return 'Hozirgina';\r\n  if (diffMins < 60) return `${diffMins} daqiqa oldin`;\r\n  if (diffHours < 24) return `${diffHours} soat oldin`;\r\n  if (diffDays < 7) return `${diffDays} kun oldin`;\r\n  return formatDate(date);\r\n}\r\n\r\n// Validate phone number (Uzbekistan format)\r\nexport function validatePhone(phone: string): boolean {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  return /^998\\d{9}$/.test(cleaned) || /^\\d{9}$/.test(cleaned);\r\n}\r\n\r\n// Format phone number\r\nexport function formatPhone(phone: string): string {\r\n  const cleaned = phone.replace(/\\D/g, '');\r\n  if (cleaned.length === 9) {\r\n    return `+998 ${cleaned.slice(0, 2)} ${cleaned.slice(2, 5)} ${cleaned.slice(5, 7)} ${cleaned.slice(7)}`;\r\n  }\r\n  if (cleaned.length === 12 && cleaned.startsWith('998')) {\r\n    return `+${cleaned.slice(0, 3)} ${cleaned.slice(3, 5)} ${cleaned.slice(5, 8)} ${cleaned.slice(8, 10)} ${cleaned.slice(10)}`;\r\n  }\r\n  return phone;\r\n}\r\n\r\n// Validate email\r\nexport function validateEmail(email: string): boolean {\r\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n}\r\n\r\n// Get order status label\r\nexport function getOrderStatusLabel(status: string): string {\r\n  const labels: Record<string, string> = {\r\n    pending: 'Kutilmoqda',\r\n    confirmed: 'Tasdiqlangan',\r\n    processing: 'Jarayonda',\r\n    shipped: 'Yo\\'lda',\r\n    delivered: 'Yetkazildi',\r\n    cancelled: 'Bekor qilindi',\r\n  };\r\n  return labels[status] || status;\r\n}\r\n\r\n// Get order status color\r\nexport function getOrderStatusColor(status: string): string {\r\n  const colors: Record<string, string> = {\r\n    pending: 'text-yellow-600 bg-yellow-100',\r\n    confirmed: 'text-blue-600 bg-blue-100',\r\n    processing: 'text-purple-600 bg-purple-100',\r\n    shipped: 'text-orange-600 bg-orange-100',\r\n    delivered: 'text-green-600 bg-green-100',\r\n    cancelled: 'text-red-600 bg-red-100',\r\n  };\r\n  return colors[status] || 'text-gray-600 bg-gray-100';\r\n}\r\n\r\n// Debounce function\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: NodeJS.Timeout;\r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(() => func(...args), wait);\r\n  };\r\n}\r\n\r\n// Local storage helpers with SSR check\r\nexport const storage = {\r\n  get: <T>(key: string, defaultValue: T): T => {\r\n    if (typeof window === 'undefined') return defaultValue;\r\n    try {\r\n      const item = localStorage.getItem(key);\r\n      return item ? JSON.parse(item) : defaultValue;\r\n    } catch {\r\n      return defaultValue;\r\n    }\r\n  },\r\n  set: <T>(key: string, value: T): void => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      localStorage.setItem(key, JSON.stringify(value));\r\n    } catch {}\r\n  },\r\n  remove: (key: string): void => {\r\n    if (typeof window === 'undefined') return;\r\n    try {\r\n      localStorage.removeItem(key);\r\n    } catch {}\r\n  },\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/components/products/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/veluna-next/components/products/ProductCard.tsx <module evaluation>\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,0RAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,iFACA","ignoreList":[0]}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/components/products/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ProductCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call ProductCard() from the server but ProductCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/veluna-next/components/products/ProductCard.tsx\",\n    \"ProductCard\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,cAAc,IAAA,0RAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6DACA","ignoreList":[0]}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/components/products/ProductGrid.tsx"],"sourcesContent":["// =====================================================\r\n// PRODUCT GRID COMPONENT\r\n// =====================================================\r\n\r\nimport { ProductCard } from './ProductCard';\r\nimport type { Product } from '@/types';\r\n\r\ninterface ProductGridProps {\r\n  products: Product[];\r\n  loading?: boolean;\r\n}\r\n\r\nexport function ProductGrid({ products, loading }: ProductGridProps) {\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6\">\r\n        {[...Array(8)].map((_, i) => (\r\n          <ProductCardSkeleton key={i} />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (products.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <p className=\"text-gray-500 dark:text-gray-400\">Mahsulot topilmadi</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6\">\r\n      {products.map((product) => (\r\n        <ProductCard key={product.id} product={product} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ProductCardSkeleton() {\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden animate-pulse\">\r\n      <div className=\"aspect-square bg-gray-200 dark:bg-gray-700\" />\r\n      <div className=\"p-4 space-y-3\">\r\n        <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3\" />\r\n        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full\" />\r\n        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3\" />\r\n        <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/4\" />\r\n        <div className=\"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/2\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA,wDAAwD;AACxD,yBAAyB;AACzB,wDAAwD;AAExD;;;AAQO,SAAS,YAAY,EAAE,QAAQ,EAAE,OAAO,EAAoB;IACjE,IAAI,SAAS;QACX,qBACE,gQAAC;YAAI,WAAU;sBACZ;mBAAI,MAAM;aAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,gQAAC,yBAAyB;;;;;;;;;;IAIlC;IAEA,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,gQAAC;YAAI,WAAU;sBACb,cAAA,gQAAC;gBAAE,WAAU;0BAAmC;;;;;;;;;;;IAGtD;IAEA,qBACE,gQAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC,wBACb,gQAAC,uKAAW;gBAAkB,SAAS;eAArB,QAAQ,EAAE;;;;;;;;;;AAIpC;AAEA,SAAS;IACP,qBACE,gQAAC;QAAI,WAAU;;0BACb,gQAAC;gBAAI,WAAU;;;;;;0BACf,gQAAC;gBAAI,WAAU;;kCACb,gQAAC;wBAAI,WAAU;;;;;;kCACf,gQAAC;wBAAI,WAAU;;;;;;kCACf,gQAAC;wBAAI,WAAU;;;;;;kCACf,gQAAC;wBAAI,WAAU;;;;;;kCACf,gQAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB"}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/components/products/index.ts"],"sourcesContent":["export { ProductCard } from './ProductCard';\r\nexport { ProductGrid } from './ProductGrid';\r\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/app/products/%5Bslug%5D/AddToCartButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AddToCartButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddToCartButton() from the server but AddToCartButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/veluna-next/app/products/[slug]/AddToCartButton.tsx <module evaluation>\",\n    \"AddToCartButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,kBAAkB,IAAA,0RAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,qFACA","ignoreList":[0]}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/app/products/%5Bslug%5D/AddToCartButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AddToCartButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call AddToCartButton() from the server but AddToCartButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/veluna-next/app/products/[slug]/AddToCartButton.tsx\",\n    \"AddToCartButton\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,kBAAkB,IAAA,0RAAuB,EAClD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,iEACA","ignoreList":[0]}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/veluna%20market/veluna-next/app/products/%5Bslug%5D/page.tsx"],"sourcesContent":["// =====================================================\r\n// PRODUCT DETAIL PAGE\r\n// =====================================================\r\n\r\nimport { Metadata } from 'next';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\nimport { notFound } from 'next/navigation';\r\nimport { ArrowLeft, ShoppingCart, Heart, Share2, Truck, Shield, RotateCcw } from 'lucide-react';\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { formatPrice, calculateDiscount } from '@/lib/utils';\r\nimport { ProductGrid } from '@/components/products';\r\nimport { AddToCartButton } from './AddToCartButton';\r\n\r\ninterface ProductPageProps {\r\n  params: { slug: string };\r\n}\r\n\r\nasync function getProduct(slug: string) {\r\n  const supabase = await createClient();\r\n  \r\n  const { data: product } = await supabase\r\n    .from('products')\r\n    .select('*, category:categories(*)')\r\n    .eq('slug', slug)\r\n    .eq('is_active', true)\r\n    .single();\r\n\r\n  return product;\r\n}\r\n\r\nasync function getRelatedProducts(categoryId: string, currentProductId: string) {\r\n  const supabase = await createClient();\r\n  \r\n  const { data: products } = await supabase\r\n    .from('products')\r\n    .select('*, category:categories(*)')\r\n    .eq('category_id', categoryId)\r\n    .eq('is_active', true)\r\n    .neq('id', currentProductId)\r\n    .limit(4);\r\n\r\n  return products || [];\r\n}\r\n\r\nexport async function generateMetadata({ params }: ProductPageProps): Promise<Metadata> {\r\n  const product = await getProduct(params.slug);\r\n  \r\n  if (!product) {\r\n    return { title: 'Mahsulot topilmadi' };\r\n  }\r\n\r\n  return {\r\n    title: product.name,\r\n    description: product.description || `${product.name} - Veluna Marketda eng qulay narxda`,\r\n    openGraph: {\r\n      title: product.name,\r\n      description: product.description || `${product.name} - Veluna Marketda`,\r\n      images: product.image_url ? [{ url: product.image_url }] : [],\r\n    },\r\n  };\r\n}\r\n\r\nexport default async function ProductPage({ params }: ProductPageProps) {\r\n  const product = await getProduct(params.slug);\r\n\r\n  if (!product) {\r\n    notFound();\r\n  }\r\n\r\n  const relatedProducts = product.category_id\r\n    ? await getRelatedProducts(product.category_id, product.id)\r\n    : [];\r\n\r\n  const discount = calculateDiscount(product.price, product.original_price);\r\n\r\n  return (\r\n    <div className=\"min-h-screen py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Breadcrumb */}\r\n        <nav className=\"flex items-center gap-2 text-sm text-gray-500 mb-8\">\r\n          <Link href=\"/\" className=\"hover:text-primary-600\">Bosh sahifa</Link>\r\n          <span>/</span>\r\n          <Link href=\"/products\" className=\"hover:text-primary-600\">Mahsulotlar</Link>\r\n          {product.category && (\r\n            <>\r\n              <span>/</span>\r\n              <Link\r\n                href={`/products?category=${product.category.slug}`}\r\n                className=\"hover:text-primary-600\"\r\n              >\r\n                {product.category.name}\r\n              </Link>\r\n            </>\r\n          )}\r\n          <span>/</span>\r\n          <span className=\"text-gray-800 dark:text-gray-200\">{product.name}</span>\r\n        </nav>\r\n\r\n        {/* Product Detail */}\r\n        <div className=\"grid md:grid-cols-2 gap-8 lg:gap-12\">\r\n          {/* Images */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"relative aspect-square rounded-2xl overflow-hidden bg-gray-100 dark:bg-gray-800\">\r\n              <Image\r\n                src={product.image_url || '/placeholder.jpg'}\r\n                alt={product.name}\r\n                fill\r\n                className=\"object-cover\"\r\n                priority\r\n              />\r\n              {discount > 0 && (\r\n                <div className=\"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-lg font-medium\">\r\n                  -{discount}%\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Thumbnails */}\r\n            {product.images && product.images.length > 0 && (\r\n              <div className=\"flex gap-2 overflow-x-auto\">\r\n                {[product.image_url, ...product.images].map((img, idx) => (\r\n                  <button\r\n                    key={idx}\r\n                    className=\"relative w-20 h-20 rounded-lg overflow-hidden border-2 border-transparent hover:border-primary-500 flex-shrink-0\"\r\n                  >\r\n                    <Image src={img} alt=\"\" fill className=\"object-cover\" />\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Info */}\r\n          <div>\r\n            {/* Category */}\r\n            {product.category && (\r\n              <Link\r\n                href={`/products?category=${product.category.slug}`}\r\n                className=\"text-sm text-primary-600 hover:underline\"\r\n              >\r\n                {product.category.name}\r\n              </Link>\r\n            )}\r\n\r\n            {/* Name */}\r\n            <h1 className=\"text-2xl md:text-3xl font-bold mt-2 mb-4\">\r\n              {product.name}\r\n            </h1>\r\n\r\n            {/* Rating */}\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n              <div className=\"flex\">\r\n                {[...Array(5)].map((_, i) => (\r\n                  <span\r\n                    key={i}\r\n                    className={`text-lg ${\r\n                      i < Math.floor(product.rating)\r\n                        ? 'text-yellow-400'\r\n                        : 'text-gray-300'\r\n                    }`}\r\n                  >\r\n                    ★\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <span className=\"text-gray-500\">\r\n                {product.rating} ({product.reviews_count} ta sharh)\r\n              </span>\r\n            </div>\r\n\r\n            {/* Price */}\r\n            <div className=\"flex items-center gap-4 mb-6\">\r\n              <span className=\"text-3xl font-bold text-primary-600\">\r\n                {formatPrice(product.price)}\r\n              </span>\r\n              {product.original_price && (\r\n                <span className=\"text-xl text-gray-400 line-through\">\r\n                  {formatPrice(product.original_price)}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {/* Stock Status */}\r\n            <div className=\"mb-6\">\r\n              {product.stock > 0 ? (\r\n                <p className=\"text-green-600 font-medium\">\r\n                  ✓ Mavjud ({product.stock} dona)\r\n                </p>\r\n              ) : (\r\n                <p className=\"text-red-600 font-medium\">✗ Tugagan</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Description */}\r\n            {product.description && (\r\n              <div className=\"mb-6\">\r\n                <h3 className=\"font-semibold mb-2\">Tavsif</h3>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">\r\n                  {product.description}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Add to Cart */}\r\n            <AddToCartButton product={product} />\r\n\r\n            {/* Features */}\r\n            <div className=\"grid grid-cols-3 gap-4 mt-8 pt-8 border-t dark:border-gray-700\">\r\n              <div className=\"text-center\">\r\n                <Truck className=\"w-6 h-6 mx-auto mb-2 text-primary-600\" />\r\n                <p className=\"text-xs text-gray-500\">Bepul yetkazish</p>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <Shield className=\"w-6 h-6 mx-auto mb-2 text-primary-600\" />\r\n                <p className=\"text-xs text-gray-500\">Kafolat</p>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <RotateCcw className=\"w-6 h-6 mx-auto mb-2 text-primary-600\" />\r\n                <p className=\"text-xs text-gray-500\">14 kun qaytarish</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Related Products */}\r\n        {relatedProducts.length > 0 && (\r\n          <section className=\"mt-16\">\r\n            <h2 className=\"text-2xl font-bold mb-8\">O'xshash mahsulotlar</h2>\r\n            <ProductGrid products={relatedProducts} />\r\n          </section>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}